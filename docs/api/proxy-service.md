# API

:::info
The entire API reference is also available in your editor via [JSDocs](https://jsdoc.app/).
:::

## `DeepAsync`

<details>
<summary><i>Type Declarations</i></summary>

```ts
type DeepAsync<TService> = TService extends (...args: any) => any
  ? ToAsyncFunction<TService>
  : TService extends { [key: string]: any }
  ? {
      [fn in keyof TService]: DeepAsync<TService[fn]>;
    }
  : never;
```

</details>

## `defineProxyService`

<details>
<summary><i>Type Declarations</i></summary>

```ts
function defineProxyService<TService extends Service, TArgs extends any[]>(
  name: string,
  init: (...args: TArgs) => TService,
  config?: ProxyServiceConfig
): [
  registerService: (...args: TArgs) => TService,
  getService: () => ProxyService<TService>
] {
  // ...
}
```

</details>

## `flattenPromise`

<details>
<summary><i>Type Declarations</i></summary>

```ts
function flattenPromise<T>(promise: Promise<T>): DeepAsync<T> {
  // ...
}
```

</details>



### Examples

```ts
function createService(dependencyPromise: Promise<SomeDependency>) {
  const dependency = flattenPromise(dependencyPromise);

  return {
    doSomething() {
      await dependency.someAsyncWork();
      // Instead of `await (await dependencyPromise).someAsyncWork();`
    }
  }
}
```

## `ProxyService`

<details>
<summary><i>Type Declarations</i></summary>

```ts
type ProxyService<TService> = TService extends DeepAsync<TService>
  ? TService
  : DeepAsync<TService>;
```

</details>

## `ProxyServiceConfig`

<details>
<summary><i>Type Declarations</i></summary>

```ts
interface ProxyServiceConfig extends ExtensionMessagingConfig {}
```

</details>

---

_Reference generated by [`plugins/typescript-docs.ts`](https://github.com/aklinker1/webext-core/blob/main/docs/.vitepress/plugins/typescript-docs.ts)_